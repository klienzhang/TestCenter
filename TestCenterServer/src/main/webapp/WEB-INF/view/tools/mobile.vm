<!DOCTYPE html>
<html>
<head>
    #parse("/basis/_import.vm")
    <link href="http://cdn.bootcss.com/bootstrap-table/1.11.0/bootstrap-table.min.css" rel="stylesheet"/>
    <script src="http://cdn.bootcss.com/bootstrap-table/1.11.0/bootstrap-table.min.js"></script>
    <script src="http://cdn.bootcss.com/bootstrap-table/1.11.0/locale/bootstrap-table-zh-CN.min.js"></script>
</head>
<body>
    <div class="panel-body" style="padding-bottom:0px;">
        <div class="panel panel-default">
            <div class="panel-heading">查询条件</div>
            <div class="panel-body">
                <form id="formSearch" class="form-horizontal">
                    <div class="form-group" style="margin-top:15px">
                        <label class="control-label col-sm-1" for="txt_search_departmentname">部门名称</label>
                        <div class="col-sm-3">
                            <input type="text" class="form-control" id="txt_search_departmentname">
                        </div>
                        <label class="control-label col-sm-1" for="txt_search_statu">状态</label>
                        <div class="col-sm-3">
                            <input type="text" class="form-control" id="txt_search_statu">
                        </div>
                        <div class="col-sm-4" style="text-align:left;">
                            <button type="button" style="margin-left:50px" id="btn_query" class="btn btn-primary">查询</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>

        <div id="toolbar" class="btn-group">
            <button id="btn_add" type="button" class="btn btn-default">
                <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>新增
            </button>
            <button id="btn_edit" type="button" class="btn btn-default">
                <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>修改
            </button>
            <button id="btn_delete" type="button" class="btn btn-default">
                <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>删除
            </button>
        </div>
        <table id="getDepartmentList"></table>
    </div>
    <script type="text/javascript">
        function edit(id){
            alert(id);
        }
        $(function(){
            //得到查询的参数
            queryParams = function (params) {
                console.log(params);
                var temp = {   //这里的键的名字和控制器的变量名必须一直，这边改动，控制器也需要改成一样的
                    pageSize: params.limit,   //页面大小
                    offset: params.offset,  //页码
                    departmentname: $("#txt_search_departmentname").val(),
                    statu: $("#txt_search_statu").val()
                };
                return temp;
            };

            $("#getDepartmentList").bootstrapTable({
                url: "http://localhost/iwjw/tools/getCityList.do",
                dataType: "json",
                pagination: true, //分页
                singleSelect: false,
                pageSize: 10,
                queryParamsType: "other",
                showRefresh: true,
                pageNumber:1,
                pageList: [5, 10, 50, 100, 200, 500],
                search: true, //显示搜索框
                sidePagination: "server", //服务端处理分页
                queryParams: queryParams,
                columns: [
                    {
                        title: 'id',
                        field: 'id',
                        align: 'center',
                        valign: 'middle'
                    },
                    {
                        title: '姓名',
                        field: 'name',
                        align: 'center',
                        valign: 'middle',
                    },
                    {
                        title: '操作',
                        field: 'id',
                        align: 'center',
                        formatter:function(value,row,index){
                            var e = '<a href="#" mce_href="#" onclick="edit(\''+ row.name + '\')">编辑</a> ';
                            var d = '<a href="#" mce_href="#" onclick="del(\''+ row.name +'\')">删除</a> ';
                            return e+d;
                        }
                    }
                ],
                responseHandler : function(res) {
                    return {
                        total : res.total,
                        rows : res.records
                    };
                }
            });
        });
    </script>
</body>
##<body class="gray-bg">
##    <table id="getDepartmentList">
##
##    </table>
##
##    <script type="text/javascript">
##        $(function(){
##
##            function edit(id){
##              alert(id);
##            };
##
##            $("#getDepartmentList").bootstrapTable({
##                url: "http://localhost/iwjw/tools/getCityList.do",
##                dataType: "json",
##                pagination: true, //分页
##                singleSelect: false,
##                pageSize: 50,
##                pageList: [1,10, 50, 100, 200, 500],
##                search: true, //显示搜索框
##                sidePagination: "server", //服务端处理分页
##                columns: [
##                    {
##                        title: 'id',
##                        field: 'id',
##                        align: 'center',
##                        valign: 'middle'
##                    },
##                    {
##                        title: '姓名',
##                        field: 'name',
##                        align: 'center',
##                        valign: 'middle',
##                    },
##                    {
##                        title: '操作',
##                        field: 'id',
##                        align: 'center',
##                        formatter:function(value,row,index){
##                            var e = '<a href="#" mce_href="#" onclick="edit('+ row.id + ')">编辑</a> ';
##                            var d = '<a href="#" mce_href="#" onclick="del('+ row.id +')">删除</a> ';
##                            return e+d;
##                        }
##                    }
##                ],
##                responseHandler : function(res) {
##                    return {
##                        total : res.total,
##                        rows : res.records
##                    };
##                }
##            });
##        });
##    </script>
##</body>
</html>
